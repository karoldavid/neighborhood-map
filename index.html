<!DOCTYPE html>
<head>
  <html lang="en">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Neighborhood Map Application">
  <meta name="author" content="Karol Zyskowski">
  <title>Neighborhood Map</title>
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Architects+Daughter">
  <link rel="stylesheet" type="text/css" href="css/style.css">
</head>

<body>
  <div class="flex-container">
    
    <header>
      <div class="item-1">
        <h1 data-bind="text: region, attr: {title: distance}"></h1>
        <p>cityZoom</p>
      </div>

      <div class="item-2" id="searchbar">
        <form action="#">
          <input class="rounded-corners" placeholder="Searchâ€¦" type="search" name="q" data-bind="textInput: query" autocomplete="off">
          <button class="functionButton reset" title="reset" data-bind="click: resetSearch">X</button>
          <button class="functionButton reverse" title="reverse" data-bind="click: reverseList"><></button>
        </form>
      </div>

      <div class="item-3 info">
        <button class="functionButton" title="Wikipedia" onclick="toggleVisibility('wikipedia');">W</button>
        <button class="functionButton" title="Info">i</button>
        <button class="functionButton" title="Help">?</button>
        <button class="myButton"><a href="mailto:k.zysk@zoho.com?subject=cityZoom Application" title="email to Karol Zyskowski" target="_self">&#9993;</a></button>
      </div>

      <div class="item-4 weather">
        <p data-bind="text: weather"></p>
      </div>
    </header>

    <div class="map-container">
        <div id="map-canvas" data-bind="map:myMap"></div>
    </div>
    <main>
      <div class="row">
    
        <div class="col-1" id="search">

          <div class="item-1 search-element" id="search-suggestions">
              <ul class="flex" data-bind="template: {name: 'focusGroup', foreach: focusButtons()}"></ul>
          </div>

<!--           <div class="item-2 search-element" id="tag-cloud">
              <ul data-bind="template: {name: 'cloud', foreach: searchTags}"></ul>
          </div> -->

          <div class="item-2 search-element content" id="search-results">
              <!-- @TODO: Scroll to activated list item -->
              <ul id="locList" data-bind="template: {name: 'result', foreach: searchResults}">
                  <!-- @TODO: not working properly-->
                  <!--<li class="message" data-bind="fadeVisible: searchResults().length === 0">Nothing Found</li>-->
              </ul>
          </div>

        </div>

        <div class="col-2"></div>
       
        <div class="col-3">
            <!--<div id="pano"></div>-->
            <div id="wikipedia">
                <ul id="wikipedia-links" data-bind="template: {name: 'wikipediaList', foreach: wikipediaLinks}"></ul>         
            </div>
          
            <div id="fs-gallery" data-bind="with: currentLocation">
                <ul data-bind="visible: focus() === 'POI', template: {name: 'photo-slider', foreach: fs_photos}"></ul>
            </div>

            <div id="fs-nearbyFood" data-bind="with: currentLocation">
                <ul data-bind="visible: focus() === 'POI', template: {name: 'nearByFood', foreach: fs_restaurants}"></ul>
            </div>

            <div id="fs-nearbyHotels" data-bind="with: currentLocation">
                <ul data-bind="visible: focus() === 'POI', template: {name: 'nearByHotels', foreach: fs_hotels}"></ul>
            </div>

      </div>
    </div>
  </main>

   <!--  <footer>
      <div class="contact">
        <i>by Karol Zyskowski</i>
        <a href="mailto:k.zysk@zoho.com" title="email to k.zysk@zoho.com" target="_self">&#9993;</a>
      </div>
    </footer> -->

  </div>

  <!-- focusGoup buttons -->
  <script type="text/html" id="focusGroup"> 
     <li><button class="suggestButton" data-bind="css: { selected: $data == $root.chosenFocusId() }, click: $root.goToFocus, attr: {title: $data}"></button></li>
  </script>

  <!-- tag cloud -->
  <script type="text/html" id="cloud"> 
    <span class="tag" data-bind="text: $data, css: { selected: $data == $root.chosenTagId() }, click: $root.goToTag, attr: {title: $data}"></span>
  </script> 

  <!-- search result list -->
  <!-- @TODO: 1 item only, click on expands search list length -->
  <script type="text/html" id="result"> 
    <li data-bind="text: title, css: { selected: $data == $root.chosenLocationId() }, click: $root.goToLocation, attr: {title: name}">
    </li>
  </script>

  <!-- Wikipedia map region info link list -->
  <script type="text/html" id="wikipediaList"> 
    <li>
      <a data-bind="attr:{href: url}, text: title" target="_blank"></a>
    </li>
  </script>

  <!-- FourSquare Gallery -->
  <script type="text/html" id="photo-slider">
    <li>
        <a class="thumbs" data-bind="attr: {href: $data}" target="_blank">
            <img title="Source: FourSquare" width="100%" data-bind="attr: {src: $data}"/>
        </a>
    </li>
  </script>

  <!-- FourSquare nearBy POI Restaurant List -->
  <script type="text/html" id="nearByFood">
    <li data-bind="text: $data"></li>
  </script>

  <!-- FourSquare nearBy POI Hotel List -->
  <script type="text/html" id="nearByHotels">
    <li data-bind="text: $data"></li>
  </script>


  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDfBRThn5FwVjH451Lo-oeK-rGHsPRVzWg" type="text/javascript"></script>
  <script src="js/lib/jquery-1.11.3.js"></script>
  <script src="js/lib/knockout-3.3.0.js"></script>
  <script src="js/data.js"></script>
  <script src="js/app.js"></script>

  <script>
    
    function toggleVisibility(id) {
    	var elem = document.getElementById(id);
    	elem.style.display = ((elem.style.display!='none') ? 'none' : 'block');
    }

    function hideElement(id) {
    	var elem = document.getElementById(id);
        elem.style.display = ('none');
    }
    
    // Hide wikipedia list
    toggleVisibility('wikipedia');
    /*toggleVisibility('tag-cloud');*/

   /* $('select').scrollTop(30);
    $('#locList').click(function(){
           var selected = $('ul #locList > li.selected').text();
           alert(selected);
     });*/

      $('.selected').on('#locList', function (e) {
      	alert(e);
      }); 

      $(function() {
      	$('a[href*=#]:not([href=#])').click(function() {
            if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
                var target = $(this.hash);
                target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
                if (target.length) {
                  $('html,body').animate({
                  scrollTop: target.offset().top
                }, 1000);
                return false;
           }
        }
      });
    });
     
  </script> 
</body>
</html>

<!-- function myFunction() {
    var elmnt = document.getElementById("myDIV");
    var x = elmnt.scrollLeft;
    var y = elmnt.scrollTop;
    document.getElementById ("demo").innerHTML = "Horizontally: " + x + "px<br>Vertically: " + y + "px";
} -->