<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Neighborhood Map Application">
  <meta name="author" content="Karol Zyskowski">
  <title>Neighborhood Map</title>
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Architects+Daughter">
  <link rel="stylesheet" type="text/css" href="css/style.css">
</head>

<body>
  <div class="flex-container">
    
    <header>
      <div class="item-1">
        <h1 data-bind="text: region"></h1>
        <p>cityZoom</p>
      </div>
      <div class="item-3 info weather">
        <button class="button" title="info" onclick="toggleVisibility('wikipedia');">i</button>
        <p data-bind="text: weather"></p>
      </div>
    </header>

    <div id="map-canvas" data-bind="map:myMap"></div>
    
    <main>
      <div class="row">
    
        <div class="col-1 search-items">
      
          <div class="item-1 search" id="searchbar">
            <form action="#"> 
              <input placeholder="Searchâ€¦" type="search" name="q" data-bind="textInput: query" autocomplete="off">
              <button class="reverse" title="reverse" data-bind="click: reverseList"><></button>
              <button class="reset" title="reset" data-bind="click: resetSearch">x</button>
              <!--<button class="button" onclick="toggleVisibility('tag-cloud');">tags</button>-->
            </form>
          </div>

          <div class="item-2" id="tag-cloud">
            <div class="content search">
              <ul data-bind="template: {name: 'cloud', foreach: searchTags}"></ul>
            </div>
          </div>

          <div class="item-3 search" id="search-results">
            <div class="content">
              <!-- @TODO: Scroll to activated list item -->
              <ul data-bind="template: {name: 'result', foreach: searchResults}">
                  <!-- @TODO: not working properly-->
                  <li class="message" data-bind="fadeVisible: searchResults().length === 0">Nothing Found</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="col-2"></div>
       
        <div class="col-3">
            <!--<div id="pano"></div>-->
            <div id="wikipedia">
                <ul id="wikipedia-links" data-bind="template: {name: 'wikipediaList', foreach: wikipediaLinks}"></ul>         
            </div>
            
            <!--<div id="description" data-bind="with: currentLocation">
                <p data-bind="text: description"></p>
            </div>-->
          
            <div id="fs-gallery" data-bind="with: currentLocation">
                <ul data-bind="template: {name: 'photo-slider', foreach: fs_photos}"></ul>
            </div>

      </div>   
    </main>

   <!--  <footer>
      <div class="contact">
        <i>by Karol Zyskowski</i>
        <a href="mailto:k.zysk@zoho.com" title="email to k.zysk@zoho.com" target="_self">&#9993;</a>
      </div>
    </footer> -->

  </div>

  <!-- tag cloud -->
  <script type="text/html" id="cloud"> 
    <span class="tag" data-bind="text: $data, css: { selected: $data == $root.chosenTagId() }, click: $root.goToTag, attr: {title: $data}"</span>
  </script> 

  <!-- search result list -->
  <script type="text/html" id="result"> 
    <li data-bind="text: title, css: { selected: $data == $root.chosenLocationId() }, click: $root.goToLocation, attr: {title: name}"></li>
  </script>

  <!-- Wikipedia map region link list -->
  <script type="text/html" id="wikipediaList"> 
    <li><a data-bind="attr:{href: url}, text: title" target="_blank"></a></li>
  </script>

  <!-- fs Gallery -->
  <script type="text/html" id="photo-slider">
    <li>
        <a class="thumbs" data-bind="attr: {href: $data}" target="_blank">
            <img width="100%" data-bind="attr: {src: $data}"/>
        </a>
    </li>
  </script>

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDfBRThn5FwVjH451Lo-oeK-rGHsPRVzWg" type="text/javascript"></script>
  <script src="js/lib/jquery-1.11.3.js"></script>
  <script src="js/lib/knockout-3.3.0.js"></script>
  <script src="js/data.js"></script>
  <script src="js/app.js"></script>

  <script>
    
    function toggleVisibility(id) {
    	var elem = document.getElementById(id);
    	elem.style.display = ((elem.style.display!='none') ? 'none' : 'block');
    }

    function hideElement(id) {
    	var elem = document.getElementById(id);
        elem.style.display = ('none');
    }
    
    // Hide wikipedia list
    toggleVisibility('wikipedia');
    /*toggleVisibility('tag-cloud');*/

  </script>

  <script>
      jQuery(document).ready(function ($) {

  
	var slideCount = $('#slider ul li').length;
	var slideWidth = $('#slider ul li').width();
	var slideHeight = $('#slider ul li').height();
	var sliderUlWidth = slideCount * slideWidth;
	
	$('#slider').css({ width: slideWidth, height: slideHeight });
	
	$('#slider ul').css({ width: sliderUlWidth, marginLeft: - slideWidth });
	
    $('#slider ul li:last-child').prependTo('#slider ul');

    function moveLeft() {
        $('#slider ul').animate({
            left: + slideWidth
        }, 200, function () {
            $('#slider ul li:last-child').prependTo('#slider ul');
            $('#slider ul').css('left', '');
        });
    };

    function moveRight() {
        $('#slider ul').animate({
            left: - slideWidth
        }, 200, function () {
            $('#slider ul li:first-child').appendTo('#slider ul');
            $('#slider ul').css('left', '');
        });
    };

    $('a.control_prev').click(function () {
        moveLeft();
    });

    $('a.control_next').click(function () {
        moveRight();
    });

});   

  </script>
</body>
</html>